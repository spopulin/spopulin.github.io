<html>

<head>

    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
        }

        button {
            width: 100%;
        }

        .container {
            text-align: center;
        }

        #map {
            height: 400px;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">

</head>

<body>
    <br>
    <br>
    <div class="container">
        <button class="btn btn-primary" onclick="getLocation()">Obtener mi ubicación</button>
        <br>
        <p id="coords"></p>
        <br>
        <br>
        <h3>Linea Recta:</h3>
        <p> Distancia a Patio Olmos:
            <span id="olmos"></span>
        </p>
        <p> Distancia a Nuevocentro Shopping:
            <span id="nuevocentro"></span>
        </p>
        <p> Distancia a Estadio Kempes:
            <span id="kempes"></span>
        </p>
        <!--
        <h3>Ruta mas rápida:</h3>
        <p> Distancia a Patio Olmos:
            <span id="olmos2"></span>
        </p>
        <p> Distancia a Nuevocentro Shopping:
            <span id="nuevocentro2"></span>
        </p>
        <p> Distancia a Estadio Kempes:
            <span id="kempes2"></span>
        </p>
        -->
    </div>
    <div id="map"></div>


    <script>
        var x = document.getElementById("coords");
        var po = document.getElementById("olmos");
        var nc = document.getElementById("nuevocentro");
        var kps = document.getElementById("kempes");

        var po2 = document.getElementById("olmos2");
        var nc2 = document.getElementById("nuevocentro2");
        var kps2 = document.getElementById("kempes2");



        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                x.innerHTML = "Este navegador no soporta geolocación";
            }
        }

        function showPosition(position) {

            var lati = Number(position.coords.latitude);
            var longi = Number(position.coords.longitude);

            x.innerHTML = "Latitud: " + lati +
                "<br>Longitud: " + longi;
            initMap(lati, longi);
            this.calculateDistances(lati, longi);
        }

        function initMap(lati, longi) {
            var uluru = { lat: lati, lng: longi };
            var patioOlmos = new google.maps.LatLng(-31.4198972, -64.1904163);
            var nuevoCentro = new google.maps.LatLng(-31.412538, -64.2062937);
            var kempes = new google.maps.LatLng(-31.3688596, -64.2483017);

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 12,
                center: uluru
            });
            var marker = new google.maps.Marker({
                position: uluru,
                title: "Tu posición",
                map: map
            });

            var markerNvoCentro = new google.maps.Marker({
                position: nuevoCentro,
                title: "Nuevocentro Shopping ",
                map: map,
                icon: "dot2.png"
            });
            var infoNvoCentro = new google.maps.InfoWindow({
                content: "<h5>NuevoCentro</h5><p>Duarte Quirós 1400, X5000 Córdoba</p>"
            });
            markerNvoCentro.addListener('click', function () {
                infoNvoCentro.open(map, markerNvoCentro);
            });

            var markerKempes = new google.maps.Marker({
                position: kempes,
                title: "Kempes ",
                map: map,
                icon: "dot2.png"
            });
            var infoKempes= new google.maps.InfoWindow({
                content: "<h5>Kempes</h5><p>Av. Cárcano s/n, Chateau Carreras, Córdoba</p>"
            });
            markerKempes.addListener('click', function () {
                infoNvoCentro.open(map, markerKempes);
            });

            var markerPatioOlmos = new google.maps.Marker({
                position: patioOlmos,
                title: "Patio Olmos",
                map: map,
                icon: "dot2.png"
            });
            var infoPatioOlmos= new google.maps.InfoWindow({
                content: "<h5>Patio Olmos</h5><p>Av. Vélez Sarsfield 361, X5000JJD Córdoba</p>"
            });
            markerPatioOlmos.addListener('click', function () {
                infoPatioOlmos.open(map, markerPatioOlmos);
            });
        }

        function calculateDistances(lati, longi) {

            var here = new google.maps.LatLng(lati, longi);
            var patioOlmos = new google.maps.LatLng(-31.4198972, -64.1904163);
            var nuevoCentro = new google.maps.LatLng(-31.412538, -64.2062937);
            var kempes = new google.maps.LatLng(-31.3688596, -64.2483017);

            po.innerHTML = (google.maps.geometry.spherical.computeDistanceBetween(here, patioOlmos) / 1000).toFixed(1) + " km";
            nc.innerHTML = (google.maps.geometry.spherical.computeDistanceBetween(here, nuevoCentro) / 1000).toFixed(1) + " km";
            kps.innerHTML = (google.maps.geometry.spherical.computeDistanceBetween(here, kempes) / 1000).toFixed(1) + " km";

            /*
            var kempesArr = [here, kempes];
            po2.innerHTML = (google.maps.geometry.spherical.computeDistanceBetween(here, patioOlmos)/1000).toFixed(1) + " km";
            nc2.innerHTML = (google.maps.geometry.spherical.computeDistanceBetween(here, nuevoCentro)/1000).toFixed(1) + " km";
            kps2.innerHTML = (google.maps.geometry.spherical.computeLength(kempesArr)/1000).toFixed(1) + " km"; */
        }


    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCuVLRssPCcrOn2DszyeBVnul0hldOqKrw&libraries=geometry,places&callback=initMap">
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>



</body>


</html>
